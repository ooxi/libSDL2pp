language: cpp
env:
  global:
    - secure: "hgyLdDIpm+TpAi7K6n4gHoe5YzOKAj740Ts5DjAhFSa6ayyrm7LXibjkSN+iINBMHwAirLN7C3Ex+JVQK8bguKe0IdiSjDU+SXZ+JtsXNqmV9fOKc3XVjQwI4kRD0Q3/F1mst8fVbeyPQFzETGzlUCp1ofy5rteZIehKsaaoeL0="
addons:
  coverity_scan:
    project:
      name: "AMDmi3/libSDL2pp"
      description: "C++11 bindings/wrapper for SDL2"
    notification_email: amdmi3@amdmi3.ru
    build_command_prepend: "cmake ."
    build_command:   "make -j 4"
    branch_pattern: coverity_scan
before_install:
  - sudo add-apt-repository --yes ppa:zoogie/sdl2-snapshots
  - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
  - sudo add-apt-repository --yes ppa:libreoffice/libreoffice-4-2
  - sudo apt-get update -qq
  - sudo apt-get install -qq cmake libsdl2-dev libsdl2-image-dev libsdl2-ttf-dev libsdl2-mixer-dev g++-4.8 cppcheck doxygen
  - sudo sed -i -e 's|friend class hash|friend struct hash|' /usr/include/c++/4.8/bits/stl_bvector.h
  - if [ "$CXX" = "g++" ]; then export CXX="g++-4.8" CC="gcc-4.8"; fi
script:
  - cmake .
  - make
